<!-- templates/index.html -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TheCoolVision - Home</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/pico.colors.min.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/pico.min.css') }}" />
</head>

<body>
    <div class="container">
        <div class="video-container" width="640" height="450" onclick="takePhoto()">
            <video class="video-feed" id="webcamVideo" autoplay></video>
            <div class="countdown-overlay"></div>
            <button class="overlay photo-button-overlay">Take a photo ðŸ“¸</button>
        </div>

        <div class="button-column mhd-buttons">
            <button class="btn-mhd" id="days-button" onclick="selectButton(this.id)">3 Tage</button>
            <button class="btn-mhd" id="weeks-button" onclick="selectButton(this.id)">1 Woche</button>
            <button class="btn-mhd" id="months-button" onclick="selectButton(this.id)">1 Monat</button>
        </div>
    </div>

    <div class="button-grid names-grid">
        <button class="btn-pers" id="pers1" onclick="selectButton(this.id)">Name 1</button>
        <button class="btn-pers" id="pers2" onclick="selectButton(this.id)">Name 2</button>
        <button class="btn-pers" id="pers3" onclick="selectButton(this.id)">Name 3</button>
        <button class="btn-pers" id="pers4" onclick="selectButton(this.id)">Name 4</button>
        <button class="btn-pers" id="pers5" onclick="selectButton(this.id)">Name 5</button>
        <button class="btn-pers" id="pers6" onclick="selectButton(this.id)">Name 6</button>
    </div>

    <div class="button-row general-controls">
        <button class="pico-background-orange-350 big-button-action" onclick="abbrechen()">Abbrechen</button>
        <button class="pico-background-green-300 big-button-action" onclick="hinzufuegen()">HinzufÃ¼gen</button>
        <button class="pico-background-orange-100 big-button-action" onclick="rausnehmen()">Rausnehmen</button>
    </div>

    <script>
        function selectButton(selectedId) {
            // Check if the button is already selected
            var button = document.getElementById(selectedId);
            var isSelected = button.classList.contains('selected');
            var buttonClass = button.classList[0];
            
    
            // Deselect all buttons if the button is already selected
            if (isSelected) {
                button.classList.remove('selected');
            } else {
                // Deselect all buttons
                document.querySelectorAll('.' + buttonClass).forEach(button => {
                    button.classList.remove('selected');
                });
    
                // Select the clicked button
                button.classList.add('selected');
            }
        }

        function rausnehmen() {
            var selectedButtons = document.querySelectorAll('.selected');
            console.log(selectedButtons);

                }

        function hinzufuegen() {

        }

        function abbrechen() {
            document.querySelectorAll('.selected').forEach(button => {
                button.classList.remove('selected');
            });
        }

            function takePhoto() {
                var overlay = document.querySelector(".countdown-overlay");
                var countdown = 3;
                var countdownInterval = setInterval(function() {
                    if (countdown === 0) {
                        console.log("Take the photo!");
                        overlay.innerText = "";
                        clearInterval(countdownInterval);
                    } else {
                        overlay.innerText = countdown;
                        countdown--;
                    }
                }, 700);
            }
        </script>

        </script>
        
        <script src="{{ url_for('static', filename='js/send_video.js') }}"></script>
    </body>

    </html>
